(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{13:function(e,t,n){function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.getPrototypeOf||function(e){return e.__proto__})(e)}for(var c=n(138),l=n(314),u=function(e){function t(e,n,o){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,s(t).call(this,e,n,o))).pausedSpending=!0,r}var n,o,c;return n=t,(o=[{key:"getRandomReceiver",value:function(){var e=this,t=y.filter(function(t){return t.wallet.address!==e.wallet.address});return t[Math.floor(Math.random()*t.length)].wallet.address}},{key:"tick",value:function(){if(!(this.state[this.wallet.address].balance<10||this.pausedSpending)&&Math.random()<.01){var e=this.generateTx(this.getRandomReceiver(),10);this.transactions.push(e),this.applyTransaction(e),this.network.broadcast(this.pid,e)}}}])&&i(n.prototype,o),c&&i(n,c),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r(e.prototype,t&&t.prototype),t&&r(e,t)}(t,e),t}(n(304).Node),f=[],h={},p=new l(15,0),d=0;d<4;d++)f.push(c.createIdentity()),h[f[d].address]={balance:100,nonce:0};for(var y=[],m=0;m<4;m++)y.push(new u(f[m],JSON.parse(JSON.stringify(h)),p)),p.connectPeer(y[m],2);e.exports={nodes:y,network:p}},225:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(18),a=n.n(i),s=(n(427),n(426),n(69)),c=n(47),l=n(2),u=n(206),f={SYMBOLS:{CIRCLE:"circle",CROSS:"cross",DIAMOND:"diamond",SQUARE:"square",STAR:"star",TRIANGLE:"triangle",WYE:"wye"}};function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){h(e,t,n[t])})}return e}({COORDS_SEPARATOR:",",FORCE_IDEAL_STRENGTH:-1e3,FORCE_X:.06,FORCE_Y:.06,GRAPH_CONTAINER_ID:"graph-container-zoomable",GRAPH_WRAPPER_ID:"graph-wrapper",KEYWORDS:{SAME:"SAME"},LINK_CLASS_NAME:"link",NODE_CLASS_NAME:"node"},f),d={automaticRearrangeAfterDropNode:!1,height:1e3,highlightDegree:1,highlightOpacity:1,linkHighlightBehavior:!1,maxZoom:8,minZoom:1,nodeHighlightBehavior:!1,panAndZoom:!1,staticGraph:!1,width:1e3,node:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:1.5,labelProperty:"id",mouseCursor:"pointer",opacity:1,renderLabel:!0,size:200,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle"},link:{color:"#000000",opacity:1,semanticStrokeWidth:!1,strokeWidth:1.5,highlightColor:"#d3d3d3"}},y={GRAPH_NO_ID_PROP:"id prop not defined! id property is mandatory and it should be unique.",INVALID_LINKS:"you provided a invalid links data structure. Links source and target attributes must point to an existent node",INSUFFICIENT_DATA:"you have not provided enough data for react-d3-graph to render something. You need to provide at least one node"};function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var S=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return v(o,(n=o=v(this,(e=k(t)).call.apply(e,[this].concat(i))),o.handleOnMouseOverLink=function(){return o.props.onMouseOverLink&&o.props.onMouseOverLink(o.props.source,o.props.target)},o.handleOnMouseOutLink=function(){return o.props.onMouseOutLink&&o.props.onMouseOutLink(o.props.source,o.props.target)},n))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e={strokeWidth:this.props.strokeWidth,stroke:this.props.stroke,opacity:this.props.opacity},t={className:this.props.className,onClick:this.handleOnClickLink,onMouseOut:this.handleOnMouseOutLink,onMouseOver:this.handleOnMouseOverLink,style:e,x1:this.props.x1,x2:this.props.x2,y1:this.props.y1,y2:this.props.y2};return r.a.createElement("line",t)}}])&&b(n.prototype,o),i&&b(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");g(e.prototype,t&&t.prototype),t&&g(e,t)}(t,e),t}(r.a.Component);function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){O(e,t,n[t])})}return e}({ARC:{START_ANGLE:0,END_ANGLE:2*Math.PI},DEFAULT_NODE_SIZE:d.node.size,NODE_LABEL_DX:".90em",NODE_LABEL_DY:".35em"},f),E=n(29);var _={buildSvgSymbol:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.DEFAULT_NODE_SIZE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.SYMBOLS.CIRCLE;return Object(E.a)().size(function(){return e}).type(function(){return function(e){switch(e){case w.SYMBOLS.CIRCLE:return E.b;case w.SYMBOLS.CROSS:return E.c;case w.SYMBOLS.DIAMOND:return E.d;case w.SYMBOLS.SQUARE:return E.e;case w.SYMBOLS.STAR:return E.f;case w.SYMBOLS.TRIANGLE:return E.g;case w.SYMBOLS.WYE:return E.h;default:return E.b}}(t)})()}};function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var P=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return j(o,(n=o=j(this,(e=x(t)).call.apply(e,[this].concat(i))),o.handleOnClickNode=function(){return o.props.onClickNode&&o.props.onClickNode(o.props.id)},o.handleOnMouseOverNode=function(){return o.props.onMouseOverNode&&o.props.onMouseOverNode(o.props.id)},o.handleOnMouseOutNode=function(){return o.props.onMouseOut&&o.props.onMouseOut(o.props.id)},n))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e,t,n,o={cursor:this.props.cursor,onClick:this.handleOnClickNode,onMouseOut:this.handleOnMouseOutNode,onMouseOver:this.handleOnMouseOverNode,opacity:this.props.opacity},i={dx:this.props.dx||w.NODE_LABEL_DX,dy:w.NODE_LABEL_DY,fill:this.props.fontColor,fontSize:this.props.fontSize,fontWeight:this.props.fontWeight,opacity:this.props.opacity},a=this.props.size,s=this.props.cx,c=this.props.cy;if(this.props.svg){var l=a/10,u=a/10,f=u/2,h=l/2,p="translate(".concat(f,",").concat(h,")");e=r.a.createElement("text",Object.assign({},i,{transform:p}),this.props.label),t=r.a.createElement("image",Object.assign({},o,{href:this.props.svg,width:u,height:l})),s-=f,c-=h}else{if(this.props.gerbil){var d=a/27,y=a/27,m=y/2,g=d/2,b="translate(".concat(m,",").concat(g,")");e=r.a.createElement("text",Object.assign({},i,{transform:b}),this.props.label),n=r.a.createElement("g",{transform:"translate("+-m+","+-g+")"},r.a.createElement("image",Object.assign({},o,{href:this.props.gerbil,width:y,height:d})))}o.d=_.buildSvgSymbol(a,this.props.type),o.fill=this.props.fill,o.stroke=this.props.stroke,o.strokeWidth=this.props.strokeWidth,e=r.a.createElement("text",i,this.props.label),t=r.a.createElement("path",o)}var v={className:this.props.className,cx:this.props.cx,cy:this.props.cy,id:this.props.id,transform:"translate(".concat(s,",").concat(c,")")};return r.a.createElement("g",v,t,this.props.renderLabel&&e,n)}}])&&C(n.prototype,o),i&&C(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");T(e.prototype,t&&t.prototype),t&&T(e,t)}(t,e),t}(r.a.Component);function M(e){return(M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=20;function A(e,t){return e.hasOwnProperty(t)&&"object"===M(e[t])&&null!==e[t]&&!R(e[t])}function R(e){return!!e&&"object"===M(e)&&!Object.keys(e).length}var D={isDeepEqual:function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if(0===o&&t===n)return!0;if(R(t)&&!R(n)||!R(t)&&R(n))return!1;var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var s=0;s<i.length;s++){var c=i[s];if(A(t,c)&&A(n,c)&&o<L)r.push(e(t[c],n[c],o+1));else{var l=R(t[c])&&R(n[c])||n.hasOwnProperty(c)&&n[c]===t[c];if(r.push(l),!l)break}}return-1===r.indexOf(!1)},isObjectEmpty:R,merge:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={};if(0===Object.keys(t||{}).length)return n&&!R(n)?n:{};for(var i=Object.keys(t),a=0;a<i.length;a++){var s=i[a];n[s]&&"object"===M(n[s])&&"object"===M(t[s])&&o<L?function(){var i=e(t[s],n[s],o+1);r[s]=t[s].hasOwnProperty("length")&&n[s].hasOwnProperty("length")?Object.keys(i).map(function(e){return i[e]}):i}():r[s]=n.hasOwnProperty(s)?n[s]:t[s]}return r},pick:function(e,t){return Object.keys(e).reduce(function(n,o){return e.hasOwnProperty(o)&&t.includes(o)&&(n[o]=e[o]),n},{})},throwErr:function(e,t){var n="react-d3-graph :: ".concat(e," :: ").concat(t);throw Error(n)}};function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=["id","highlighted","x","y","index","vy","vx"];function G(e,t,n,o){var r=e.highlighted||e.id===(n&&n.source)||e.id===(n&&n.target),i=!!(t||n&&n.source&&n.target);return i&&0===o.highlightDegree?r?o.node.opacity:o.highlightOpacity:i?r?o.node.opacity:o.highlightOpacity:o.node.opacity}function z(e,t){var n,o=e.data,r=e.id,i=e.config;!function(e){e.nodes&&e.nodes.length||D.throwErr("Graph",y.INSUFFICIENT_DATA);for(var t=e.links.length,n=function(t){var n=e.links[t];e.nodes.find(function(e){return e.id===n.source})||D.throwErr("Graph","".concat(y.INVALID_LINKS,' - "').concat(n.source,'" is not a valid source node id')),e.nodes.find(function(e){return e.id===n.target})||D.throwErr("Graph","".concat(y.INVALID_LINKS,' - "').concat(n.target,'" is not a valid target node id'))},o=0;o<t;o++)n(o)}(o);var a=o.nodes.map(function(e){return Object.assign({},e)}),s=o.links.map(function(e){return Object.assign({},e)});(n=t&&t.nodes&&t.links?{nodes:o.nodes.map(function(e){return t.nodes[e.id]?Object.assign({},e,D.pick(t.nodes[e.id],W)):Object.assign({},e)}),links:{}}:{nodes:o.nodes.map(function(e){return Object.assign({},e)}),links:{}}).links=o.links.map(function(e){return Object.assign({},e)});var l,u,f,h,m=Object.assign({},D.merge(d,i||{})),g=function(e){for(var t={},n=e.length,o=0;o<n;o++){var r=e[o];r.highlighted=!1,r.hasOwnProperty("x")||(r.x=0),r.hasOwnProperty("y")||(r.y=0),t[r.id.toString()]=r}return t}(n.nodes),b=n.links.reduce(function(e,t){var n=t.source.id||t.source,o=t.target.id||t.target;return e[n]||(e[n]={}),e[o]||(e[o]={}),e[n][o]=e[o][n]=t.value||1,e},{}),v=n,k=v.nodes,S=v.links;return{id:r.replace(/ /g,"_"),config:m,links:b,d3Links:S,linksInputSnapshot:s,nodes:g,d3Nodes:k,nodesInputSnapshot:a,highlightedNode:"",simulation:(l=m.width,u=m.height,f=Object(c.d)(l/2).strength(p.FORCE_X),h=Object(c.e)(u/2).strength(p.FORCE_Y),Object(c.c)().force("charge",Object(c.b)().strength(p.FORCE_IDEAL_STRENGTH)).force("x",f).force("y",h)),newGraphElements:!1,configUpdated:!1,transform:1}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t,n,o,i,a,s,c){return t.map(function(t){var l=t.source,u=t.target,f=l.id||l,h=u.id||u,d="".concat(f).concat(p.COORDS_SEPARATOR).concat(h),y=function(e,t,n,o,r,i,a,s){var c=e.source,l=e.target,u=t[c]&&t[c].x||0,f=t[c]&&t[c].y||0,h=t[l]&&t[l].x||0,d=t[l]&&t[l].y||0,y=!1;switch(o.highlightDegree){case 0:break;case 2:y=!0;break;default:y=c===i||l===i}var m=y&&t[c].highlighted&&t[l].highlighted,g=c===(a&&a.source)&&l===(a&&a.target),b=m||g,v=o.link.opacity;(i||a&&a.source)&&(v=b?o.link.opacity:o.highlightOpacity);var k=e.color||o.link.color;b&&(k=o.link.highlightColor===p.KEYWORDS.SAME?o.link.color:o.link.highlightColor);var S=o.link.strokeWidth*(1/s);return o.link.semanticStrokeWidth&&(S+=(n[c][l]||n[l][c]||1)*S/10),{source:c,target:l,x1:u,y1:f,x2:h,y2:d,strokeWidth:S,stroke:k,className:p.LINK_CLASS_NAME,opacity:v,onClickLink:r.onClickLink,onMouseOverLink:r.onMouseOverLink,onMouseOutLink:r.onMouseOutLink}}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){B(e,t,n[t])})}return e}({},t,{source:"".concat(f),target:"".concat(h)}),e,n,o,i,"".concat(a),s,c);return r.a.createElement(S,Object.assign({key:d},y))})}function H(e,t,n,o,i,a,s,c){return Object.keys(e).map(function(l){var u;if(e[l].isMessage){u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=e.highlighted||e.id===(r&&r.source)||e.id===(r&&r.target),s=G(e,o,r,t),c=t.node.strokeColor;a&&t.node.highlightStrokeColor!==p.KEYWORDS.SAME&&(c=t.node.highlightStrokeColor);var l=1/i,u=e.size||t.node.size,f=(a?t.node.highlightFontSize:t.node.fontSize)*l+u/100+1.5,h=a?t.node.highlightStrokeWidth:t.node.strokeWidth,d=e.svg||t.node.svg,y=e.fontColor||t.node.fontColor;return{className:p.NODE_CLASS_NAME,cursor:t.node.mouseCursor,cx:e&&e.x||"0",cy:e&&e.y||"0",fill:"#00FF1E",fontColor:y,fontSize:0,dx:f,fontWeight:a?t.node.highlightFontWeight:t.node.fontWeight,id:e.id,label:"",onClickNode:n.onClickNode,onMouseOverNode:n.onMouseOverNode,onMouseOut:n.onMouseOut,opacity:s,renderLabel:t.node.renderLabel,size:15*l,stroke:c,strokeWidth:h*l,svg:d,type:e.symbolType||t.node.symbolType}}(Object.assign({},e[l],{id:"".concat(l)}),n,{},o,i,a);var f=e[l].sig.substring(2,8);u.fill="#"+f,e[l].isDoubleSpend&&(u.size=18,u.stroke="#ff0000",u.strokeWidth=1)}else if(u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=e.highlighted||e.id===(r&&r.source)||e.id===(r&&r.target),s=G(e,o,r,t),c=e.color||t.node.color;a&&t.node.highlightColor!==p.KEYWORDS.SAME&&(c=t.node.highlightColor);var l=t.node.strokeColor;a&&t.node.highlightStrokeColor!==p.KEYWORDS.SAME&&(l=t.node.highlightStrokeColor);var u=1/i,f=e.size||t.node.size,h=a?t.node.highlightFontSize:t.node.fontSize,d=h*u+f/100+1.5,y=a?t.node.highlightStrokeWidth:t.node.strokeWidth,m=e.svg||t.node.svg,g=e.gerbil,b=e.fontColor||t.node.fontColor;return{className:p.NODE_CLASS_NAME,cursor:t.node.mouseCursor,cx:e&&e.x||"0",cy:e&&e.y||"0",fill:c,fontColor:b,fontSize:h*u,dx:d,fontWeight:a?t.node.highlightFontWeight:t.node.fontWeight,gerbil:g,id:e.id,label:e[t.node.labelProperty]||e.id,onClickNode:n.onClickNode,onMouseOverNode:n.onMouseOverNode,onMouseOut:n.onMouseOut,opacity:s,renderLabel:t.node.renderLabel,size:f*u,stroke:l,strokeWidth:y*u,svg:m,type:e.symbolType||t.node.symbolType}}(Object.assign({},e[l],{id:"".concat(l)}),n,t,o,i,a),s){var h=s(l,Math.floor(c));u.fill=h.color}return r.a.createElement(P,Object.assign({key:l},u))})}function Y(e){return(Y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return!t||"object"!==Y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,q(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.doubleSpend,n=e.spend,o=e.hide;e.visibleState;return r.a.createElement("div",{id:"NodeControls"},r.a.createElement("button",{id:"doubleSpend",onClick:function(){t(),o()}},"Double Spend"),r.a.createElement("button",{id:"spend",onClick:function(){n(),o()}},"Spend"))}}])&&U(n.prototype,o),i&&U(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");K(e.prototype,t&&t.prototype),t&&K(e,t)}(t,e),t}(o.Component);function J(e){return(J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ee(e,t){return!t||"object"!==J(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var ne,oe={FORCE_LINK_STRENGTH:1,LINK_IDEAL_DISTANCE:100,SIMULATION_ALPHA_TARGET:.05};function re(e,t){return Object.keys(e).find(function(n){return e[n]===t})}var ie=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ee(this,te(t).call(this,e)))._onDragEnd=function(){!n.state.config.staticGraph&&n.state.config.automaticRearrangeAfterDropNode&&n.state.simulation.alphaTarget(oe.SIMULATION_ALPHA_TARGET).restart(),ne<10&&Object(l.f)(window).on("click.drag",null)},n._onDragMove=function(e,t,o){var r=o[t].id;if(!n.state.config.staticGraph){var i=n.state.nodes[r];i.x+=l.b.dx,i.y+=l.b.dy,i.fx=i.x,i.fy=i.y,n._tick(),n.animate()}ne+=l.b.dx*l.b.dx+l.b.dy*l.b.dy},n._onDragStart=function(){n.pauseSimulation(),ne=0},n._setNodeHighlightedValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n._tick(function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=r?o:"",a=Object.assign({},e[o],{highlighted:r}),s=Object.assign({},e,I({},o,a));return t[o]&&0!==n.highlightDegree&&(s=Object.keys(t[o]).reduce(function(e,t){var n=Object.assign({},s[t],{highlighted:r});return Object.assign(e,I({},t,n))},s)),{nodes:s,highlightedNode:i}}(n.state.nodes,n.state.links,n.state.config,e,t))},n._tick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.setState(e)},n._zoomConfig=function(){return Object(l.f)("#".concat(n.state.id,"-").concat(p.GRAPH_WRAPPER_ID)).call(Object(u.a)().scaleExtent([n.state.config.minZoom,n.state.config.maxZoom]).on("zoom",n._zoomed))},n._zoomed=function(){var e=l.b.transform;Object(l.g)("#".concat(n.state.id,"-").concat(p.GRAPH_CONTAINER_ID)).attr("transform",e),n.state.config.panAndZoom&&n.setState({transform:e.k})},n.onMouseOverNode=function(e){},n.onMouseOutNode=function(e){n.props.onMouseOutNode&&n.props.onMouseOutNode(e),n.state.config.nodeHighlightBehavior&&n._setNodeHighlightedValue(e,!1)},n.onMouseOverLink=function(e,t){n.props.onMouseOverLink&&n.props.onMouseOverLink(e,t),n.state.config.linkHighlightBehavior&&(n.setState({highlightedLink:{source:e,target:t}}),n._tick())},n.onMouseOutLink=function(e,t){n.props.onMouseOutLink&&n.props.onMouseOutLink(e,t),n.state.config.linkHighlightBehavior&&(n.setState({highlightedLink:void 0}),n._tick())},n.pauseSimulation=function(){return n.state.simulation.stop()},n.resetNodesPositions=function(){if(!n.state.config.staticGraph){for(var e in n.state.nodes){var t=n.state.nodes[e];t.fx&&t.fy&&(Reflect.deleteProperty(t,"fx"),Reflect.deleteProperty(t,"fy"))}n.state.simulation.alphaTarget(oe.SIMULATION_ALPHA_TARGET).restart(),n._tick()}},n.restartSimulation=function(){return!n.state.config.staticGraph&&n.state.simulation.restart()},n.props.id||D.throwErr(n.constructor.name,y.GRAPH_NO_ID_PROP),n.state=z(n.props,n.state),n.state.time=0,n.state.paused=!1,n}var n,o,i;return n=t,(o=[{key:"componentWillReceiveProps",value:function(e){var t=e.data.nodes.length!==this.state.nodesInputSnapshot.length||e.data.links.length!==this.state.linksInputSnapshot.length||!D.isDeepEqual(e.data,{nodes:this.state.nodesInputSnapshot,links:this.state.linksInputSnapshot}),n=!D.isObjectEmpty(e.config)&&!D.isDeepEqual(e.config,this.state.config),o=t?z(e,this.state):this.state,r=n?D.merge(d,e.config||{}):this.state.config;t&&this.pauseSimulation();var i=e.config.panAndZoom!==this.state.config.panAndZoom?1:this.state.transform;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){V(e,t,n[t])})}return e}({},o,{config:r,newGraphElements:t,configUpdated:n,transform:i})),e.messages&&this.setState({messages:e.messages}),e.speed&&this.setState({speed:e.speed}),e.nodeState&&this.setState({nodeState:e.nodeState});var a=this.state.paused;this.setState({paused:e.paused},function(){a&&!e.paused&&this.tick()})}},{key:"onClickNode",value:function(e){if(this.state.clickedNode&&this.state.clickedNode.id===e)this.setState({clickedNode:null});else{var t=this.state.nodes[e];this.setState({clickedNode:t})}}},{key:"componentDidUpdate",value:function(){this.state.config.staticGraph&&this.pauseSimulation(),!this.state.config.staticGraph&&this.state.newGraphElements&&(this._graphForcesConfig(),this.restartSimulation(),this.setState({newGraphElements:!1})),this.state.configUpdated&&(this._zoomConfig(),this.setState({configUpdated:!1}))}},{key:"componentDidMount",value:function(){this.state.config.staticGraph||this._graphForcesConfig(),this._zoomConfig(),this.tick=this.tick.bind(this),this.animate=this.animate.bind(this),this.getTick=this.props.onTick,this.start()}},{key:"componentWillUnmount",value:function(){this.pauseSimulation()}},{key:"start",value:function(){this.tick(),this.getTick(0)}},{key:"tick",value:function(){if(this.state.paused)console.log("paused!");else{var e=this.state.time,t=this.state.time+.1;this.animate(),Math.floor(t)-Math.floor(e)===1&&this.getTick(Math.floor(t)),this.animate(),this.setState({time:t}),requestAnimationFrame(this.tick)}}},{key:"step",value:function(e){var t=this.state.messages,n=this.state.nodes;console.log(n);for(var o=0;o<t.length;o++){var r=re(n,t[o].node);console.log("to delete:",r),delete n[r]}console.log(n),this.animate(),this.setState({time:e},function(){console.log("SET TIME TO",this.state.time),this.getTick(e),this.animate()})}},{key:"animate",value:function(){var e=this.state.messages;if(e){for(var t=0;t<e.length;t++){var n=this.state.nodes;if(!e[t].key&&(e[t].key=e[t].message.sig+e[t].sender+e[t].recipient.pid+e[t].rcvTime,!e[t].node))if(n[e[t].key])e[t].node=n[e[t].key];else{var o=new P;o.isMessage=!0,o.isDoubleSpend=e[t].message.isDoubleSpend,o.sig=e[t].message.sig,e[t].node=o,n[e[t].key]=o}var r=e[t].node,i=(this.state.time-e[t].sentTime)/(e[t].recvTime-e[t].sentTime);if(i<=1&&i>=0){var a=n[e[t].sender],s=n[e[t].recipient.pid];r.x=a.x,r.y=a.y,r.x=s.x,r.y=s.y,r.x=i*(s.x-a.x)+a.x,r.y=i*(s.y-a.y)+a.y}else i>1&&(delete n[e[t].key],e.splice(t,1))}this.setState({messages:e})}}},{key:"render",value:function(){var e=this.props,t=e.doubleSpend,n=e.spend,o=e.deselectNode,i=e.clickedNode,a=e.visibleState,s=function(e,t,n,o,r,i,a,s,c,l,u){return{nodes:H(e,t,i,a,s,c,l,u),links:F(e,n,o,i,r,a,s,c)}}(this.state.nodes,{onClickNode:this.props.onClickNode,onMouseOverNode:this.onMouseOverNode,onMouseOut:this.onMouseOutNode},this.state.d3Links,this.state.links,{onClickLink:this.props.onClickLink,onMouseOverLink:this.onMouseOverLink,onMouseOutLink:this.onMouseOutLink},this.state.config,this.state.highlightedNode,this.state.highlightedLink,this.state.transform,this.state.nodeState,this.state.time),c=s.nodes,l=s.links,u="";i&&(u=r.a.createElement("foreignObject",{x:this.state.nodes[i.pid].x,y:this.state.nodes[i.pid].y},r.a.createElement(Z,{doubleSpend:function(){return t(i)},spend:function(){return n(i)},hide:o,visibleState:function(){return a(i)}})));return r.a.createElement("div",{id:"".concat(this.state.id,"-").concat(p.GRAPH_WRAPPER_ID)},r.a.createElement("svg",{style:{maxHeight:"100%",maxWidth:"100%",viewBox:"0 0 1000 1000",preserveAspectRatio:"xMaxYMax"}},r.a.createElement("g",{id:"".concat(this.state.id,"-").concat(p.GRAPH_CONTAINER_ID)},l,c,u)))}},{key:"_graphForcesConfig",value:function(){this.state.simulation.nodes(this.state.d3Nodes).on("tick",this._tick);var e=Object(c.a)(this.state.d3Links).id(function(e){return e.id}).distance(oe.LINK_IDEAL_DISTANCE).strength(oe.FORCE_LINK_STRENGTH);this.state.simulation.force(p.LINK_CLASS_NAME,e);var t=Object(s.a)().on("start",this._onDragStart).on("drag",this._onDragMove).on("end",this._onDragEnd);Object(l.f)("#".concat(this.state.id,"-").concat(p.GRAPH_WRAPPER_ID)).selectAll(".node").call(t)}}])&&$(n.prototype,o),i&&$(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");X(e.prototype,t&&t.prototype),t&&X(e,t)}(t,e),t}(r.a.Component),ae=n(13),se=n(137),ce=n(136),le=n(221),ue=n.n(le);function fe(e){return(fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function de(e,t){return!t||"object"!==fe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),de(this,ye(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.paused,n=e.onPause,o=e.onPauseTxs,i=(e.pausedTxs,e.togglePopup);return r.a.createElement("div",{id:"Controls"},r.a.createElement(ce.a,{onClick:n},t?r.a.createElement(se.a,{glyph:"play"}):r.a.createElement(se.a,{glyph:"pause"})),r.a.createElement("div",{id:"txToggle"},"Send Transactions ",r.a.createElement(ue.a,{onChange:o})),r.a.createElement(ce.a,{onClick:i},r.a.createElement(se.a,{glyph:"question-sign"})))}}])&&pe(n.prototype,o),i&&pe(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");he(e.prototype,t&&t.prototype),t&&he(e,t)}(t,e),t}(o.Component),ge=n(88),be=n.n(ge);function ve(e){return(ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oe(e,t){return!t||"object"!==ve(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Ee=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Oe(this,we(t).call(this,e))).invalidNonceTxs=[],n}var n,o,i;return n=t,(o=[{key:"updateInvalidNonceTxs",value:function(){var e=this.invalidNonceTxs,t=this.props.node,n=[],o=[];Object.keys(t.invalidNonceTxs).forEach(function(e,o){Object.keys(t.invalidNonceTxs[e]).forEach(function(o,r){var i=t.invalidNonceTxs[e][o];n.push(i.contents)})});var r=!0,i=!1,a=void 0;try{for(var s,c=function(){var e=s.value;n.find(function(t){return be.a.isEqual(t,e)})&&o.push(e)},l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)c()}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}for(var u=function(){var e=n[f];o.find(function(t){return be.a.isEqual(e,t)})||o.push(e)},f=0;f<n.length;f++)u();this.invalidNonceTxs=o}},{key:"clicked",value:function(e,t){e(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.node,o=t.icons,i=t.showState;this.updateInvalidNonceTxs();var a=Object.keys(n.state).map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.substring(0,5)),r.a.createElement("td",null,n.state[e].balance),r.a.createElement("td",null,n.state[e].nonce))}),s=this.invalidNonceTxs.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.from.substring(0,5)),r.a.createElement("td",null,e.to.substring(0,5)),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,e.nonce))}),c=r.a.createElement("div",{style:this.invalidNonceTxs.length?{}:{display:"none"}},r.a.createElement("p",null,"Invalid Nonce Transactions"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"From"),r.a.createElement("th",null,"To"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Nonce")),s))),l=Number.parseInt(n.color.slice(1),16),u="white";return(.299*(l>>16&255)+.587*(l>>8&255)+.114*(255&l))/255>.5&&(u="black"),r.a.createElement("div",{className:"Ledger",id:"ledger-"+n.pid,style:{backgroundColor:n.color,color:u}},r.a.createElement("img",{alt:"Gerbil",src:o[n.pid],width:"30"}),r.a.createElement("span",{className:"ledger-title"}," "+n.pid.substring(0,5)),r.a.createElement("button",{className:"LedgerMinimizeButton",onClick:function(t){return e.clicked(i,n)}},r.a.createElement("div",{className:"LedgerMinimizeButtonIcon",style:{backgroundColor:u}})),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Balance"),r.a.createElement("th",null,"Nonce"),r.a.createElement("th",null,"            ")),a)),c)}}])&&Se(n.prototype,o),i&&Se(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");ke(e.prototype,t&&t.prototype),t&&ke(e,t)}(t,e),t}(o.Component);function _e(e){return(_e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ce(e,t){return!t||"object"!==_e(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(this,je(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.icons,o=e.showState;return r.a.createElement("div",{id:"Ledgers"},Object.keys(t).map(function(e,i){return r.a.createElement(Ee,{key:e,node:t[e],icons:n,showState:o})}))}}])&&Te(n.prototype,o),i&&Te(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Ne(e.prototype,t&&t.prototype),t&&Ne(e,t)}(t,e),t}(o.Component),Pe=n(91),Me=n(73),Le=n(93);function Ae(e){return(Ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ie(e,t){return!t||"object"!==Ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,We(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.show,n=e.handleClose,o=r.a.createElement(Le.a,{id:"modal-popover",title:""},"For the technical people: We took the first 6 hexadecimal characters of the Keccak-256 hash of the state and turned it into a hex color!"),i=r.a.createElement(Le.a,{id:"modal-popover",title:"Spend"},'Clicking "Spend" will make the selected node generate and propagate a transaction sending $10 to a random node.'),a=r.a.createElement(Le.a,{id:"modal-popover",title:"Double Spend"},'Clicking "Double Spend" will make the selected node generate and selectively propagate two transactions each sending $10 to a different peer.',r.a.createElement("br",null)),s=r.a.createElement(Le.a,{id:"modal-popover",title:"Resume Transactions"},'Switching on "Resume Transactions" will make all nodes randomly generate and send transactions.',r.a.createElement("br",null));return r.a.createElement(Me.a,{show:t,onHide:n},r.a.createElement(Me.a.Header,{closeButton:!0},r.a.createElement(Me.a.Title,null,"Instructions")),r.a.createElement(Me.a.Body,null,r.a.createElement("h4",null,"What is this?"),r.a.createElement("p",null,"This is an interactive network simulation designed as a part of Chapter 2 of a course called "," ",r.a.createElement("a",{href:"https://cryptoeconomics.study/"},"Cryptoeconomics.study"),"."),r.a.createElement("h4",null,"How do you send a transaction?"),r.a.createElement("p",null,"Click on a node to either "," ",r.a.createElement(Pe.a,{overlay:i},r.a.createElement("a",{href:""},"Spend"))," "," or "," ",r.a.createElement(Pe.a,{overlay:a},r.a.createElement("a",{href:""},"Double Spend"))," ",". You can also toggle the "," ",r.a.createElement(Pe.a,{overlay:s},r.a.createElement("a",{href:""},"Resume Transactions"))," ","switch."),r.a.createElement("h4",null,"What do the colors mean?"),r.a.createElement("p",null,"The color of each node "," ",r.a.createElement(Pe.a,{overlay:o},r.a.createElement("a",{href:""},"represents"))," "," the state of that node's ledger."),r.a.createElement("hr",null)),r.a.createElement(Me.a.Footer,null,r.a.createElement(ce.a,{onClick:n},"Close")))}}])&&De(n.prototype,o),i&&De(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Re(e.prototype,t&&t.prototype),t&&Re(e,t)}(t,e),t}(o.Component);function ze(e){return(ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function He(e){return(He=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ke=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=He(t).call(this,e))||"object"!==ze(r)&&"function"!==typeof r?Ye(o):r).clicked=n.clicked.bind(Ye(Ye(n))),n}var n,o,i;return n=t,(o=[{key:"clicked",value:function(e,t){e(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isSelected,o=t.icons,i=t.node,a=t.showState,s={height:"45px",width:"45px",backgroundColor:i.color,borderRadius:"50%",display:n?"none":"flex"};return i?r.a.createElement("div",{onClick:function(t){return e.clicked(a,i)},className:"TrayButton",id:"trayButton-"+i.pid,style:s},r.a.createElement("img",{alt:"Gerbil",src:o[i.pid],width:"25"})):r.a.createElement("div",null)}}])&&Fe(n.prototype,o),i&&Fe(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Be(e.prototype,t&&t.prototype),t&&Be(e,t)}(t,e),t}(o.Component);function Ue(e){return(Ue="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ze(e,t){return!t||"object"!==Ue(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ze(this,Je(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.selectedNodes,o=e.icons,i=e.showState;return r.a.createElement("div",{id:"Tray"},Object.keys(t).map(function(e,a){return r.a.createElement(Ke,{key:e,isSelected:t[e].pid in n,icons:o,node:t[e],showState:i})}))}}])&&qe(n.prototype,o),i&&qe(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Qe(e.prototype,t&&t.prototype),t&&Qe(e,t)}(t,e),t}(o.Component),Xe=n(207),$e=n.n(Xe);function et(e){return(et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){nt(e,t,n[t])})}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function it(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.getPrototypeOf||function(e){return e.__proto__})(e)}for(var st=["https://i.imgur.com/Wi9yFXw.png","https://i.imgur.com/U5Y99Rm.png","https://i.imgur.com/NPH4rqg.png","https://i.imgur.com/MptO0GC.png","https://i.imgur.com/yHwPVBF.png","https://i.imgur.com/yvv1MMb.png","https://i.imgur.com/I4Dlkik.png","https://i.imgur.com/jNB8LS6.png"],ct={nodes:[],links:[]},lt={},ut=0;ut<ae.nodes.length;ut++)ct.nodes.push({id:ae.nodes[ut].pid,name:ae.nodes[ut].pid.slice(0,5),gerbil:st[ut]}),lt[ae.nodes[ut].pid]=st[ut];var ft=!0,ht=!1,pt=void 0;try{for(var dt,yt=ae.nodes[Symbol.iterator]();!(ft=(dt=yt.next()).done);ft=!0){var mt=dt.value,gt=!0,bt=!1,vt=void 0;try{for(var kt,St=ae.network.peers[mt.pid][Symbol.iterator]();!(gt=(kt=St.next()).done);gt=!0){var Ot=kt.value;ct.links.push({source:mt.pid,target:Ot.pid})}}catch(y){bt=!0,vt=y}finally{try{gt||null==St.return||St.return()}finally{if(bt)throw vt}}}}catch(y){ht=!0,pt=y}finally{try{ft||null==yt.return||yt.return()}finally{if(ht)throw pt}}var wt={automaticRearrangeAfterDropNode:!0,staticGraph:!1,nodeHighlightBehavior:!0,node:{size:400,highlightStrokeColor:"blue",labelProperty:"name"},link:{highlightColor:"lightblue"}},Et=function(e,t){window.alert("Clicked link between ".concat(e," and ").concat(t))},_t=function(e,t){},Nt=function(e,t){},Tt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=it(this,at(t).call(this))).state={clickedNode:null,selectedNodes:{},history:[],paused:!1,pausedTxs:!0,speed:10},e}var n,o,i;return n=t,(o=[{key:"componentDidMount",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=ae.nodes[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;this.showState(i)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"setMessageQueue",value:function(e){var t=e.messageQueue,n=[];return Object.keys(t).forEach(function(e,o){var r=!0,i=!1,a=void 0;try{for(var s,c=t[e][Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;n.push(tt({},l,{rcvTime:e}))}}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}}),n}},{key:"tick",value:function(){ae.network.tick();var e=this.state.history;e.push($e()(ae.network)),this.setState({history:e})}},{key:"getTick",value:function(e){var t=this.state,n=t.history,o=t.selectedNodes,r=t.clickedNode;if(e>n.length)throw new Error("You skipped a time step!");e===n.length&&this.tick();var i=this.setMessageQueue(n[e]);if(r){var a=this.getNode(r.pid,e);this.setState({clickedNode:a})}for(var s in o)o[s]=this.getNode(s,e);this.setState({selectedNodes:o,messages:i,time:e})}},{key:"getNode",value:function(e,t){var n=this.state.history[t];if(n)return n.agents.find(function(t){return t.pid===e})}},{key:"getCurrNode",value:function(e){if(ae.network)return ae.network.agents.find(function(t){return t.pid===e})}},{key:"onClickNode",value:function(e){var t=this.state,n=t.clickedNode,o=t.time,r=this.getNode(e,o);n&&r.pid===n.pid?this.setState({clickedNode:null}):this.setState({clickedNode:r})}},{key:"onMouseOverNode",value:function(e){}},{key:"onMouseOutNode",value:function(e){}},{key:"pause",value:function(){this.setState({paused:!this.state.paused})}},{key:"pauseTxs",value:function(){this.setState({pausedTxs:!this.state.pausedTxs});var e=!0,t=!1,n=void 0;try{for(var o,r=ae.nodes[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;i.pausedSpending=!i.pausedSpending}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"rewind",value:function(){var e=this.state.speed;1.5*e>10||(this.setState({speed:e*=1.5}),console.log("rewind",e))}},{key:"fastforward",value:function(){var e=this.state.speed;e/1.5<.005||(this.setState({speed:e/=1.5}),console.log("fastforward",e))}},{key:"stepbackward",value:function(){console.log("stepbackward");var e=this.state.time;e<1||(this.setState({paused:!0}),this.graph.step(e-1),this.getTick(e-1),this.graph.animate())}},{key:"stepforward",value:function(){console.log("stepforward");var e=this.state.time;this.setState({paused:!0}),this.graph.step(e+1),this.getTick(e+1),this.graph.animate()}},{key:"doubleSpend",value:function(e){var t=e.pid,n=[ae.network.peers[t][0],ae.network.peers[t][1]],o=[e.generateTx(n[0].wallet.address,10),e.generateTx(n[1].wallet.address,10)];o[0].isDoubleSpend=!0,o[1].isDoubleSpend=!0,ae.network.broadcastTo(t,n[0],o[0]),ae.network.broadcastTo(t,n[1],o[1]),console.log("Double spender:",t,"victims:",n,"spends:",o)}},{key:"spend",value:function(e){var t=this.getCurrNode(e.pid),n=t.generateTx(t.getRandomReceiver(),10);t.transactions.push(n),t.applyTransaction(n),ae.network.broadcast(t.pid,n)}},{key:"showState",value:function(e){var t=this.state.selectedNodes;t[e.pid]?delete t[e.pid]:t[e.pid]=e,this.setState({selectedNodes:t})}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"visibleState",value:function(e){return!!this.state.selectedNodes[e.pid]}},{key:"deselectNode",value:function(){this.setState({clickedNode:null})}},{key:"reset",value:function(){console.log("reset"),this.getTick(0)}},{key:"setSpeed",value:function(e){var t=e/1e3;this.setState({speed:t}),console.log("speeedooo",t)}},{key:"setLatency",value:function(e){var t=e.target.value,n=Math.min(Math.max(parseInt(t),1),10);console.log("latency",t,n)}},{key:"setPacketLoss",value:function(e){var t=e.target.value,n=Math.min(Math.max(parseInt(t),1),20);console.log("packetloss",t,n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.clickedNode,o=t.selectedNodes,i=t.messages,a=t.time,s=t.paused,c=t.pausedTxs,l=t.speed;return r.a.createElement("div",{id:"App-container"},r.a.createElement("div",{id:"Text-container"},r.a.createElement("div",{id:"Overflow-top"}),r.a.createElement("h3",null,"2.2: The Double Spend"),r.a.createElement("div",{id:"Text"},"Building a centralized payments processor like Paypal is simple, but relies on trust that Paypal will not break the rules. A simple way to decentralize PayPal is to make clients download all transactions and run the PayPal code to generate their belief of the current state. ",r.a.createElement("br",null),r.a.createElement("br",null),"In a decentralized system, we cannot rely on a global clock, and we cannot assume a constant latency for all messages to be delivered.",r.a.createElement("br",null),r.a.createElement("br",null),"This is the root cause of the double spend problem: an attacker can send one message to Jing & another message to Karl each spending the same coins. If Jing and Karl both accept those transactions, their states will diverge and we will have a fork. Not good! We need decentralized consensus!"),r.a.createElement("div",{id:"Overflow-bottom"})),r.a.createElement("div",{id:"Network-container"},r.a.createElement("div",{id:"Graph-container"},r.a.createElement(Ve,{nodes:ae.nodes,selectedNodes:o,showState:this.showState.bind(this),icons:lt}),r.a.createElement(xe,{nodes:o,showState:this.showState.bind(this),icons:lt}),r.a.createElement(ie,{ref:function(t){e.graph=t},id:"graph-id",data:ct,config:wt,onClickNode:this.onClickNode.bind(this),clickedNode:n,onClickLink:Et,onMouseOverNode:this.onMouseOverNode.bind(this),onMouseOutNode:this.onMouseOutNode.bind(this),onMouseOverLink:_t,onMouseOutLink:Nt,doubleSpend:this.doubleSpend.bind(this),spend:this.spend.bind(this),deselectNode:this.deselectNode.bind(this),visibleState:this.visibleState.bind(this),messages:i,time:a,speed:l,paused:s,onTick:this.getTick.bind(this),nodeState:this.getNode.bind(this)})),r.a.createElement("div",{id:"Input-container"},r.a.createElement("div",{id:"Controls-container"},r.a.createElement(me,{onPause:this.pause.bind(this),onPauseTxs:this.pauseTxs.bind(this),paused:s,pausedTxs:c,togglePopup:this.togglePopup.bind(this),stepbackward:this.stepbackward.bind(this),stepforward:this.stepforward.bind(this),rewind:this.rewind.bind(this),fastforward:this.fastforward.bind(this),reset:this.reset.bind(this)})))),r.a.createElement(Ge,{show:this.state.showPopup,handleClose:this.togglePopup.bind(this)}))}}])&&rt(n.prototype,o),i&&rt(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");ot(e.prototype,t&&t.prototype),t&&ot(e,t)}(t,e),t}(o.Component);function Ct(e){return(Ct="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pt(e,t){return!t||"object"!==Ct(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Lt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pt(this,Mt(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Tt,null))}}])&&xt(n.prototype,o),i&&xt(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");jt(e.prototype,t&&t.prototype),t&&jt(e,t)}(t,e),t}(o.Component),At=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Rt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a.a.render(r.a.createElement(Lt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/code",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/code","/service-worker.js");At?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Rt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Rt(e)})}}()},304:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=n(138);function i(e){return r.hash.keccak256(JSON.stringify(e))}function a(e){return"#"+r.hash.keccak256(JSON.stringify(e)).substr(-6)}var s=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wallet=t,this.pid=t.address,this.network=o,this.state=n,this.color=a(n),this.transactions=[],this.invalidNonceTxs={}}var t,n,s;return t=e,(n=[{key:"onReceive",value:function(e){this.transactions.includes(e)||(this.transactions.push(e),this.applyTransaction(e),this.network.broadcast(this.pid,e),this.applyInvalidNonceTxs(e.contents.from))}},{key:"applyInvalidNonceTxs",value:function(e){var t=this.state[e].nonce;e in this.invalidNonceTxs&&t in this.invalidNonceTxs[e]&&(this.applyTransaction(this.invalidNonceTxs[e][t]),delete this.invalidNonceTxs[e][t],this.applyInvalidNonceTxs(e))}},{key:"tick",value:function(){}},{key:"generateTx",value:function(e,t){var n={type:"send",amount:t,from:this.wallet.address,to:e,nonce:this.state[this.wallet.address].nonce};return{contents:n,sig:r.sign(this.wallet.privateKey,i(n))}}},{key:"applyTransaction",value:function(e){if(r.recover(e.sig,i(e.contents))!==e.contents.from)throw new Error("Invalid signature!");if(e.contents.to in this.state||(this.state[[e.contents.to]]={balance:0,nonce:0}),e.contents.nonce!==this.state[[e.contents.from]].nonce)return e.contents.from in this.invalidNonceTxs||(this.invalidNonceTxs[e.contents.from]={}),void(this.invalidNonceTxs[e.contents.from][e.contents.nonce]=e);if("send"!==e.contents.type)throw new Error("Invalid transaction type!");this.state[[e.contents.from]].balance-e.contents.amount<0||(this.state[[e.contents.from]].balance-=e.contents.amount,this.state[[e.contents.to]].balance+=e.contents.amount,this.state[[e.contents.from]].nonce+=1,this.color=a(this.state))}}])&&o(t.prototype,n),s&&o(t,s),e}();e.exports={Node:s,getTxHash:i}},305:function(e,t){},314:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=n(88),i=n(224),a=n(313),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i.randomNormal.source(a("a22ebc7c488a3a47"))(t,2*t/5);this.agents=[],this.latencyDistribution=function(){return Math.floor(Math.max(o(),0))},this.time=0,this.messageQueue={},this.peers={},this.packetLoss=n}var t,n,s;return t=e,(n=[{key:"connectPeer",value:function(e,t){e.network=this;var n=r.shuffle(this.agents);this.agents.push(e),this.peers[e.pid]=[];var o=!0,i=!1,a=void 0;try{for(var s,c=n.slice(0,t)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;this.peers[e.pid].push(l),this.peers[l.pid].push(e)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},{key:"broadcast",value:function(e,t){var n=!0,o=!1,r=void 0;try{for(var i,a=this.peers[e][Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;this.broadcastTo(e,s,t)}}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}}},{key:"broadcastTo",value:function(e,t,n){var o=this.time+this.latencyDistribution();o in this.messageQueue||(this.messageQueue[o]=[]),this.messageQueue[o].push({sender:e,sentTime:this.time,recipient:t,recvTime:o,message:n})}},{key:"tick",value:function(){if(this.time in this.messageQueue){var e=!0,t=!1,n=void 0;try{for(var o,r=this.messageQueue[this.time][Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value,a=i.recipient,s=i.message;Math.random()>this.packetLoss&&a.onReceive(s)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}delete this.messageQueue.time}var c=!0,l=!1,u=void 0;try{for(var f,h=this.agents[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){f.value.tick()}}catch(e){l=!0,u=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw u}}this.time+=1}},{key:"run",value:function(e){for(var t=0;t<e;t++)this.tick()}}])&&o(t.prototype,n),s&&o(t,s),e}();e.exports=s},394:function(e,t){},397:function(e,t){},418:function(e,t){},420:function(e,t){},426:function(e,t,n){},427:function(e,t,n){},441:function(e,t,n){n(440),e.exports=n(225)}},[[441,0,1]]]);
//# sourceMappingURL=main.8251e497.chunk.js.map